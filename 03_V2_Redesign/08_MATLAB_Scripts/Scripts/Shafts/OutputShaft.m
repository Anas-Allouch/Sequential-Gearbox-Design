%% redesign output shaft gear 1 + reverse
clear all
clc

Sut     = 1250; % in [MPa]
Sy      = 1150; % in [MPa]
Mmax    = [77.8807947019868,116.821192052980,436.132450331126,669.774834437086,741.298013245033,551.761589403974,383.284768211920,214.807947019867,67.3907284768207,42.1192052980131];
diam    = [40.0 48.0 50.0 50.0 45.0 45.0 40.0 40.0 38.0 30.0];
notch   = [1.00 0.15 1.00 1.00 1.00 0.90 1.00 0.90 0.15 1.00];
kt      = [2.40 4.50 2.30 2.30 2.25 2.14 2.25 2.14 4.60 2.30];
kts     = [2.00 2.50 1.65 1.65 1.65 3.00 1.55 3.00 2.75 1.90];
ratio   = 2.52;
Tmax    = 450*ratio;
for i=1:1:length(Mmax)
    n_SF(i, :) = SafetyFactors(Sut, Sy, Mmax(i), Tmax, diam(i), notch(i), kt(i), kts(i));
end

for i=1:1:length(Mmax)
    disp(n_SF(i, :));
end

%% redesign output shaft gear 2 + gear 3
clear all
clc

Sut     = 1250; % in [MPa]
Sy      = 1150; % in [MPa]
Mmax    = [51.5915402691733,77.3873104037599,288.912625507370,443.687246314890,650.053407391583,591.892757957701,411.162144840846,230.431531723991,72.2922452467419,45.1826532792139];
diam    = [40.0 48.0 50.0 50.0 45.0 45.0 40.0 40.0 38.0 30.0];
notch   = [1.00 0.15 1.00 1.00 1.00 0.90 1.00 0.90 0.15 1.00];
kt      = [2.40 4.50 2.30 2.30 2.25 2.14 2.25 2.14 4.60 2.30];
kts     = [2.00 2.50 1.65 1.65 1.65 3.00 1.55 3.00 2.75 1.90];
ratio   = 1.8387;
Tmax    = 450*ratio;
for i=1:1:length(Mmax)
    n_SF(i, :) = SafetyFactors(Sut, Sy, Mmax(i), Tmax, diam(i), notch(i), kt(i), kts(i));
end

for i=1:1:length(Mmax)
    disp(n_SF(i, :));
end

%% redesign output shaft gear 4 + gear 5
clear all
clc

Sut     = 1250; % in [MPa]
Sy      = 1150; % in [MPa]
Mmax    = [19.1406880956227,28.7110321434340,107.187853335487,164.609917622355,241.172670004846,327.305766435148,403.868518817638,275.553222419641,86.4480697787108,54.0300436116945];
diam    = [40.0 48.0 50.0 50.0 45.0 45.0 40.0 40.0 38.0 30.0];
notch   = [1.00 0.15 1.00 1.00 1.00 0.90 1.00 0.90 0.15 1.00];
kt      = [2.40 4.50 2.30 2.30 2.25 2.14 2.25 2.14 4.60 2.30];
kts     = [2.00 2.50 1.65 1.65 1.65 3.00 1.55 3.00 2.75 1.90];
ratio   = 1.1463;
Tmax    = 450*ratio;
for i=1:1:length(Mmax)
    n_SF(i, :) = SafetyFactors(Sut, Sy, Mmax(i), Tmax, diam(i), notch(i), kt(i), kts(i));
end

for i=1:1:length(Mmax)
    disp(n_SF(i, :));
end